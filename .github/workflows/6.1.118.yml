- name: 下载并配置 6.1.118-android14 内核源码
  run: |
    mkdir -p ~/android-kernel && cd ~/android-kernel
    # 直接克隆目标提交（无需拉取全部分支）
    git clone https://android.googlesource.com/kernel/common gki-6.1.118
    cd gki-6.1.118
    # 直接检出目标提交（跳过分支切换，更高效）
    git checkout 367540fdf98147e0e5cd42d42ff4867ebd8ea7ef
    cp $GITHUB_WORKSPACE/.github/.config .config
    make ARCH=arm64 CROSS_COMPILE=aarch64-linux-android- \
         CC=clang LD=ld.lld modules_prepare
    echo "✅ 6.1.118-android14 内核源码准备完成"
